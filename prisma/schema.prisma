// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    // NOTE: When using postgresql, mysql or sqlserver, uncomment the @db.Text annotations in model Account below
    // Further reading:
    // https://next-auth.js.org/adapters/prisma#create-the-prisma-schema
    // https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#string
    url      = env("DATABASE_URL")
}

enum TypeOfAirport {
    domestic
    local
    international
}

enum FlyingRouteType {
    Local
    International
}

model Airports {
    id                          Int                                             @id @default(autoincrement())

    Geometry                    Unsupported("geography(MultiPolygon, 4326)")
    Center                      Unsupported("geography(Point, 4326)")

    Name                        String

    IntroEn                     String
    SeoTitleEn                  String
    SeoDescriptionEn            String

    Type                        TypeOfAirport
    AltName                     String?
    IATA                        String?                                         //@unique
    ICAO                        String?                                         
    Passengers                  String?
    NameDe                      String?
    NameEn                      String?
    NameEs                      String?
    NameFr                      String?
    NameIT                      String?
    NameNL                      String?
    Operator                    String?
    City                        String?
    Country                     String?
    ElFeet                      Int 
    ElMeters                    Float
    Website                     String?
    Wiki                        String?
q                   String?
    TimezoneD                   String?
    
    @@index([Geometry], name: "airports_geometry_idx", type: Gist)
    @@index([Center], name: "airports_center_point_idx", type: Gist)
}

model Countries {
    id          Int                                             @id @default(autoincrement())

    Geometry    Unsupported("geography(MultiPolygon, 4326)")
    
    Name        String
    Code        String

    @@index([Geometry], name: "country_geometry_idx", type: Gist)
}

model AdminRegions {
    id          Int                                             @id @default(autoincrement())

    Geometry    Unsupported("geography(MultiPolygon, 4326)")
    Center      Unsupported("geography(Point, 4326)")
    
    Code        String
    Country     String
    CountryI2   Int
    Name        String
    TypeLocal   String
    TypeEn      String
    Type        String
    Points      String
    Points2     String
    
    @@index([Geometry], name: "admin_regions_geometry_idx", type: Gist)
    @@index([Center], name: "admin_regions_center_point_idx", type: Gist)
}

model Districts {
    id          Int                                         @id @default(autoincrement())

    Geometry    Unsupported("geography(MultiPolygon, 4326)")
    Center      Unsupported("geography(Point, 4326)")

    Code        String
    Country     String
    CountryID   Int
    ParentADM   String
    Name        String
    TypeLocal   String
    TypeEn      String
    Type        String

    @@index([Geometry], name: "districts_geometry_idx", type: Gist)
    @@index([Center], name: "districts_center_point_idx", type: Gist)
}

model Municipalities{
    id          Int                                         @id @default(autoincrement())

    Geometry    Unsupported("geography(MultiPolygon, 4326)")
    Center      Unsupported("geography(Point, 4326)")

    Code        String
    Country     String
    CountryID   Int
    ParentADM   String
    ParentDIS   String
    Name        String
    TypeLocal   String
    Type        String

    @@index([Geometry], name: "municipalities_geometry_idx", type: Gist)
    @@index([Center], name: "municipalities_center_point_idx", type: Gist)
}

model Cities {
    id          Int                                     @id @default(autoincrement())

    Geometry    Unsupported("geography(Point, 4326)")

    Name        String
    Type        String
    NameAlt     String
    Country     String
    ISO2        String
    ISO3        String
    ParentADM   String
    Capital     String
    Population  String
}

model FlyingRoutes {
    id                          Int                                     @id @default(autoincrement())

    RouteIata                   String
    Type                        FlyingRouteType
    LengthMiles                 Int
    LengthKm                    Int	
    FlightDuration              String
    TimeDifference              String
    CO2Emissions                String
    IntroEn                     String?
    DetailsEn                   String?
    MetaDescriptionEn           String?
    
    OriginAirportName           String
    OriginAirportId             String?
    OriginCityName              String
    OriginCityId                String?
    OriginCountryName           String
    OriginCountryId             String?
    OriginIata                  String
    OriginIcao                  String

    OriginGpsCoordinates        String
    OriginCoordinates           Unsupported("geography(Point, 4326)")

    DestinationAirportName      String
    DestinationAirportId        String?
    DestinationCityName         String
    DestinationCityId           String?
    DestinationCountryName      String
    DestinationCountryId        String?
    DestinationIata             String
    DestinationIcao             String

    DestinationGpsCoordinates   String
    DestinationCoordinates      Unsupported("geography(Point, 4326)")

    Airlines                    String[]

    @@index([OriginCoordinates], name: "flying_routes_origin_сoordinate_idx", type: Gist)
    @@index([DestinationCoordinates], name: "flying_routes_destination_сoordinate_idx", type: Gist)
}

model DrivingRoutes {
    id                              Int                                 @id @default(autoincrement())

    TitleEn                         String
    DistanceKm                      Int
    DistanceMiles                   Int
    DrivingTime                     Int?
    FlightDistance                  Int
    FlightDistanceMiles             Int

    RegionFromCoordinates           Unsupported("geography(Point, 4326)")

    RegionFromCoordinatesOriginal   String

    RegionToCoordinates             Unsupported("geography(Point, 4326)")

    RegionToCoordinatesOriginal     String

    RegionFromCityName              String
    RegionFromCityId                String?
    CountryFromName                 String
    CountryFromId                   String?
    RegionToCityName                String
    RegionToCityId                  String?
    CountryToName                   String
    CountryToId                     String?
    MNI                             Boolean
    SeoDemandEn                     Int?
    MetaTitleEn                     String?
    MetaDescriptionEn               String?
    IntroEn                         String?
    ContentEn                       String?
    FaqQ1En                         String?
    FaqA1En                         String?
    FaqQ2En                         String?
    FaqA2En                         String?

    @@index([RegionFromCoordinates], name: "driving_routes_region_from_сoordinates_idx", type: Gist)
    @@index([RegionToCoordinates], name: "driving_routes_region_to_сoordinates_idx", type: Gist)
}



// Remove if unnecessary
model Example {
    id        String   @id @default(cuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

// Necessary for Next auth
model Account {
    id                String  @id @default(cuid())
    userId            String
    type              String
    provider          String
    providerAccountId String
    refresh_token     String? // @db.Text
    access_token      String? // @db.Text
    expires_at        Int?
    token_type        String?
    scope             String?
    id_token          String? // @db.Text
    session_state     String?
    user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

    @@unique([provider, providerAccountId])
}

model Session {
    id           String   @id @default(cuid())
    sessionToken String   @unique
    userId       String
    expires      DateTime
    user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model User {
    id            String    @id @default(cuid())
    name          String?
    email         String?   @unique
    emailVerified DateTime?
    image         String?
    accounts      Account[]
    sessions      Session[]
}

model VerificationToken {
    identifier String
    token      String   @unique
    expires    DateTime

    @@unique([identifier, token])
}
